var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function a(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,n,r,o){return t[1]&&o?e(r.ctx.slice(),t[1](o(n))):r.ctx}function u(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function f(){return t=" ",document.createTextNode(t);var t}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){for(const n in e)d(t,n,e[n])}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function y(t,e,n){t.classList[n?"add":"remove"](e)}let m;function b(t){m=t}function k(){if(!m)throw new Error("Function called outside component initialization");return m}function M(t){k().$$.on_mount.push(t)}function w(){const t=k();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}const x=[],P=[],S=[],O=[],D=Promise.resolve();let $=!1;function A(t){S.push(t)}const E=new Set;let L=0;function _(){const t=m;do{for(;L<x.length;){const t=x[L];L++,b(t),T(t.$$)}for(b(null),x.length=0,L=0;P.length;)P.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];E.has(e)||(E.add(e),e())}S.length=0}while(x.length);for(;O.length;)O.pop()();$=!1,E.clear(),b(t)}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const C=new Set;function z(t,e){t&&t.i&&(C.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(C.has(t))return;C.add(t),undefined.c.push((()=>{C.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function j(t,e,r,i){const{fragment:s,on_mount:u,on_destroy:c,after_update:l}=t.$$;s&&s.m(e,r),i||A((()=>{const e=u.map(n).filter(a);c?c.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(A)}function I(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(x.push(t),$||($=!0,D.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function R(e,n,a,i,s,u,c,h=[-1]){const f=m;b(e);const p=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:h,skip_bound:!1,root:n.target||f.$$.root};c&&c(p.root);let d=!1;if(p.ctx=a?a(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),d&&W(e,t)),n})):[],p.update(),d=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();n.intro&&z(e.$$.fragment),j(e,n.target,n.anchor,n.customElement),_()}b(f)}class G{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function N(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))}function q(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function V(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}var B=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function Z(t,e){var n=function(t){var e=t.name;if(e&&-1!==e.lastIndexOf(".")&&!t.type){var n=e.split(".").pop().toLowerCase(),r=B.get(n);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}(t);if("string"!=typeof n.path){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof e?e:"string"==typeof r&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}var H=[".DS_Store","Thumbs.db"];function Q(t){return N(this,void 0,void 0,(function(){return q(this,(function(e){return[2,(n=t,n.dataTransfer&&t.dataTransfer?J(t.dataTransfer,t.type):K(t))];var n}))}))}function K(t){return(null!==t.target&&t.target.files?X(t.target.files):[]).map((function(t){return Z(t)}))}function J(t,e){return N(this,void 0,void 0,(function(){var n;return q(this,(function(r){switch(r.label){case 0:return t.items?(n=X(t.items).filter((function(t){return"file"===t.kind})),"drop"!==e?[2,n]:[4,Promise.all(n.map(Y))]):[3,2];case 1:return[2,U(tt(r.sent()))];case 2:return[2,U(X(t.files).map((function(t){return Z(t)})))]}}))}))}function U(t){return t.filter((function(t){return-1===H.indexOf(t.name)}))}function X(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function Y(t){if("function"!=typeof t.webkitGetAsEntry)return et(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?rt(e):et(t)}function tt(t){return t.reduce((function(t,e){return function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(V(arguments[e]));return t}(t,Array.isArray(e)?tt(e):[e])}),[])}function et(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=Z(e);return Promise.resolve(n)}function nt(t){return N(this,void 0,void 0,(function(){return q(this,(function(e){return[2,t.isDirectory?rt(t):ot(t)]}))}))}function rt(t){var e=t.createReader();return new Promise((function(t,n){var r=[];!function o(){var a=this;e.readEntries((function(e){return N(a,void 0,void 0,(function(){var a,i,s;return q(this,(function(u){switch(u.label){case 0:if(e.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return a=u.sent(),t(a),[3,4];case 3:return i=u.sent(),n(i),[3,4];case 4:return[3,6];case 5:s=Promise.all(e.map(nt)),r.push(s),o(),u.label=6;case 6:return[2]}}))}))}),(function(t){n(t)}))}()}))}function ot(t){return N(this,void 0,void 0,(function(){return q(this,(function(e){return[2,new Promise((function(e,n){t.file((function(n){var r=Z(n,t.fullPath);e(r)}),(function(t){n(t)}))}))]}))}))}const at=t=>{t=Array.isArray(t)&&1===t.length?t[0]:t;return{code:"file-invalid-type",message:`File type must be ${Array.isArray(t)?`one of ${t.join(", ")}`:t}`}},it=t=>({code:"file-too-large",message:`File is larger than ${t} bytes`}),st=t=>({code:"file-too-small",message:`File is smaller than ${t} bytes`}),ut={code:"too-many-files",message:"Too many files"};function ct(t,e){const n="application/x-moz-file"===t.type||function(t,e){if(t&&e){const n=Array.isArray(e)?e:e.split(","),r=t.name||"",o=(t.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return n.some((t=>{const e=t.trim().toLowerCase();return"."===e.charAt(0)?r.toLowerCase().endsWith(e):e.endsWith("/*")?a===e.replace(/\/.*$/,""):o===e}))}return!0}(t,e);return[n,n?null:at(e)]}function lt(t){return null!=t}function ht(t){return"function"==typeof t.isPropagationStopped?t.isPropagationStopped():void 0!==t.cancelBubble&&t.cancelBubble}function ft(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,(t=>"Files"===t||"application/x-moz-file"===t)):!!t.target&&!!t.target.files}function pt(t){t.preventDefault()}function dt(t){let e,n,r,a,i,g,y;const m=t[28].default,b=function(t,e,n,r){if(t){const o=s(t,e,n,r);return t[0](o)}}(m,t,t[27],null),k=b||function(t){let e;return{c(){e=h("p"),e.textContent="Drag 'n' drop some files here, or click to select files"},m(t,n){c(t,e,n)},d(t){t&&l(e)}}}();return{c(){e=h("div"),n=h("input"),r=f(),k&&k.c(),d(n,"accept",t[0]),n.multiple=t[1],d(n,"type","file"),d(n,"autocomplete","off"),d(n,"tabindex","-1"),v(n,"display","none"),d(e,"tabindex","0"),d(e,"class",a=(t[4]?"":"dropzone")+" "+t[2]+" svelte-817dg2"),d(e,"style",t[3])},m(o,a){c(o,e,a),u(e,n),t[29](n),u(e,r),k&&k.m(e,null),t[30](e),i=!0,g||(y=[p(n,"change",t[14]),p(n,"click",gt),p(e,"keydown",t[16](t[7])),p(e,"focus",t[16](t[8])),p(e,"blur",t[16](t[9])),p(e,"click",t[15](t[10])),p(e,"dragenter",t[17](t[11])),p(e,"dragover",t[17](t[12])),p(e,"dragleave",t[17](t[13])),p(e,"drop",t[17](t[14]))],g=!0)},p(t,r){(!i||1&r[0])&&d(n,"accept",t[0]),(!i||2&r[0])&&(n.multiple=t[1]),b&&b.p&&(!i||134217728&r[0])&&function(t,e,n,r,o,a){if(o){const i=s(e,n,r,a);t.p(i,o)}}(b,m,t,t[27],i?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(m,t[27],r,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[27]),null),(!i||20&r[0]&&a!==(a=(t[4]?"":"dropzone")+" "+t[2]+" svelte-817dg2"))&&d(e,"class",a),(!i||8&r[0])&&d(e,"style",t[3])},i(t){i||(z(k,t),i=!0)},o(t){F(k,t),i=!1},d(n){n&&l(e),t[29](null),k&&k.d(n),t[30](null),g=!1,o(y)}}}function gt(t){t.stopPropagation()}function vt(t,e,n){let{$$slots:r={},$$scope:o}=e,{accept:a}=e,{disabled:i=!1}=e,{getFilesFromEvent:s=Q}=e,{maxSize:u=1/0}=e,{minSize:c=0}=e,{multiple:l=!0}=e,{preventDropOnDocument:h=!0}=e,{noClick:f=!1}=e,{noKeyboard:p=!1}=e,{noDrag:d=!1}=e,{noDragEventsBubbling:g=!1}=e,{containerClasses:v=""}=e,{containerStyles:y=""}=e,{disableDefaultStyles:m=!1}=e;const b=w();let x,S,O={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function D(){S&&(n(6,S.value=null,S),O.isFileDialogActive=!0,S.click())}function $(t){return i?null:t}function A(t){g&&t.stopPropagation()}let E=[];function L(t){x&&x.contains(t.target)||(t.preventDefault(),E=[])}function _(){O.isFileDialogActive&&setTimeout((()=>{if(S){const{files:t}=S;t.length||(O.isFileDialogActive=!1,b("filedialogcancel"))}}),300)}var T;return M((()=>{window.addEventListener("focus",_,!1),h&&(document.addEventListener("dragover",pt,!1),document.addEventListener("drop",L,!1))})),T=()=>{window.removeEventListener("focus",_,!1),h&&(document.removeEventListener("dragover",pt),document.removeEventListener("drop",L))},k().$$.on_destroy.push(T),t.$$set=t=>{"accept"in t&&n(0,a=t.accept),"disabled"in t&&n(18,i=t.disabled),"getFilesFromEvent"in t&&n(19,s=t.getFilesFromEvent),"maxSize"in t&&n(20,u=t.maxSize),"minSize"in t&&n(21,c=t.minSize),"multiple"in t&&n(1,l=t.multiple),"preventDropOnDocument"in t&&n(22,h=t.preventDropOnDocument),"noClick"in t&&n(23,f=t.noClick),"noKeyboard"in t&&n(24,p=t.noKeyboard),"noDrag"in t&&n(25,d=t.noDrag),"noDragEventsBubbling"in t&&n(26,g=t.noDragEventsBubbling),"containerClasses"in t&&n(2,v=t.containerClasses),"containerStyles"in t&&n(3,y=t.containerStyles),"disableDefaultStyles"in t&&n(4,m=t.disableDefaultStyles),"$$scope"in t&&n(27,o=t.$$scope)},[a,l,v,y,m,x,S,function(t){x&&x.isEqualNode(t.target)&&(32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),D()))},function(){O.isFocused=!0},function(){O.isFocused=!1},function(){f||(!function(t=window.navigator.userAgent){return function(t){return-1!==t.indexOf("MSIE")||-1!==t.indexOf("Trident/")}(t)||function(t){return-1!==t.indexOf("Edge/")}(t)}()?D():setTimeout(D,0))},function(t){t.preventDefault(),A(t),E=[...E,t.target],ft(t)&&Promise.resolve(s(t)).then((e=>{ht(t)&&!g||(O.draggedFiles=e,O.isDragActive=!0,b("dragenter",{dragEvent:t}))}))},function(t){if(t.preventDefault(),A(t),t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch{}return ft(t)&&b("dragover",{dragEvent:t}),!1},function(t){t.preventDefault(),A(t);const e=E.filter((t=>x&&x.contains(t))),n=e.indexOf(t.target);-1!==n&&e.splice(n,1),E=e,e.length>0||(O.isDragActive=!1,O.draggedFiles=[],ft(t)&&b("dragleave",{dragEvent:t}))},function(t){t.preventDefault(),A(t),E=[],ft(t)&&Promise.resolve(s(t)).then((e=>{if(ht(t)&&!g)return;const n=[],r=[];e.forEach((t=>{const[e,o]=ct(t,a),[i,s]=function(t,e,n){if(lt(t.size))if(lt(e)&&lt(n)){if(t.size>n)return[!1,it(n)];if(t.size<e)return[!1,st(e)]}else{if(lt(e)&&t.size<e)return[!1,st(e)];if(lt(n)&&t.size>n)return[!1,it(n)]}return[!0,null]}(t,c,u);if(e&&i)n.push(t);else{const e=[o,s].filter((t=>t));r.push({file:t,errors:e})}})),!l&&n.length>1&&(n.forEach((t=>{r.push({file:t,errors:[ut]})})),n.splice(0)),O.acceptedFiles=n,O.fileRejections=r,b("drop",{acceptedFiles:n,fileRejections:r,event:t}),r.length>0&&b("droprejected",{fileRejections:r,event:t}),n.length>0&&b("dropaccepted",{acceptedFiles:n,event:t})})),O.isFileDialogActive=!1,O.isDragActive=!1,O.draggedFiles=[],O.acceptedFiles=[],O.fileRejections=[]},$,function(t){return p?null:$(t)},function(t){return d?null:$(t)},i,s,u,c,h,f,p,d,g,o,r,function(t){P[t?"unshift":"push"]((()=>{S=t,n(6,S)}))},function(t){P[t?"unshift":"push"]((()=>{x=t,n(5,x)}))}]}class yt extends G{constructor(t){super(),R(this,t,vt,dt,i,{accept:0,disabled:18,getFilesFromEvent:19,maxSize:20,minSize:21,multiple:1,preventDropOnDocument:22,noClick:23,noKeyboard:24,noDrag:25,noDragEventsBubbling:26,containerClasses:2,containerStyles:3,disableDefaultStyles:4},null,[-1,-1])}}var mt=function(t,e){return(mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}mt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var kt=function(){return(kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Mt(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function wt(t,e,n){if(t&&t.length){var r=e[0],o=e[1],a=Math.PI/180*n,i=Math.cos(a),s=Math.sin(a);t.forEach((function(t){var e=t[0],n=t[1];t[0]=(e-r)*i-(n-o)*s+r,t[1]=(e-r)*s+(n-o)*i+o}))}}function xt(t){var e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}function Pt(t,e){var n=e.hachureAngle+90,r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);var o=[0,0];if(n)for(var a=0,i=t;a<i.length;a++)wt(i[a],o,n);var s=function(t,e){for(var n=[],r=0,o=t;r<o.length;r++)(c=Mt([],o[r],!0))[0].join(",")!==c[c.length-1].join(",")&&c.push([c[0][0],c[0][1]]),c.length>2&&n.push(c);var a=[];e=Math.max(e,.1);for(var i=[],s=0,u=n;s<u.length;s++)for(var c=u[s],l=0;l<c.length-1;l++){var h=c[l],f=c[l+1];if(h[1]!==f[1]){var p=Math.min(h[1],f[1]);i.push({ymin:p,ymax:Math.max(h[1],f[1]),x:p===h[1]?h[0]:f[0],islope:(f[0]-h[0])/(f[1]-h[1])})}}if(i.sort((function(t,e){return t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)})),!i.length)return a;for(var d=[],g=i[0].ymin;d.length||i.length;){if(i.length){var v=-1;for(l=0;l<i.length&&!(i[l].ymin>g);l++)v=l;i.splice(0,v+1).forEach((function(t){d.push({s:g,edge:t})}))}if((d=d.filter((function(t){return!(t.edge.ymax<=g)}))).sort((function(t,e){return t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)})),d.length>1)for(l=0;l<d.length;l+=2){var y=l+1;if(y>=d.length)break;var m=d[l].edge,b=d[y].edge;a.push([[Math.round(m.x),g],[Math.round(b.x),g]])}g+=e,d.forEach((function(t){t.edge.x=t.edge.x+e*t.edge.islope}))}return a}(t,r);if(n){for(var u=0,c=t;u<c.length;u++)wt(c[u],o,-n);!function(t,e,n){var r=[];t.forEach((function(t){return r.push.apply(r,t)})),wt(r,e,n)}(s,o,-n)}return s}var St=function(){function t(t){this.helper=t}return t.prototype.fillPolygons=function(t,e){return this._fillPolygons(t,e)},t.prototype._fillPolygons=function(t,e){var n=Pt(t,e);return{type:"fillSketch",ops:this.renderLines(n,e)}},t.prototype.renderLines=function(t,e){for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];n.push.apply(n,this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],e))}return n},t}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e.prototype.fillPolygons=function(t,e){var n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);for(var r=Pt(t,Object.assign({},e,{hachureGap:n})),o=Math.PI/180*e.hachureAngle,a=[],i=.5*n*Math.cos(o),s=.5*n*Math.sin(o),u=0,c=r;u<c.length;u++){var l=c[u],h=l[0],f=l[1];xt([h,f])&&a.push([[h[0]-i,h[1]+s],Mt([],f,!0)],[[h[0]+i,h[1]-s],Mt([],f,!0)])}return{type:"fillSketch",ops:this.renderLines(a,e)}},e}(St),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e.prototype.fillPolygons=function(t,e){var n=this._fillPolygons(t,e),r=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),o=this._fillPolygons(t,r);return n.ops=n.ops.concat(o.ops),n},e}(St),$t=function(){function t(t){this.helper=t}return t.prototype.fillPolygons=function(t,e){var n=Pt(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(n,e)},t.prototype.dotsOnLines=function(t,e){var n=[],r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);var o=e.fillWeight;o<0&&(o=e.strokeWidth/2);for(var a=r/4,i=0,s=t;i<s.length;i++)for(var u=s[i],c=xt(u),l=c/r,h=Math.ceil(l)-1,f=c-h*r,p=(u[0][0]+u[1][0])/2-r/4,d=Math.min(u[0][1],u[1][1]),g=0;g<h;g++){var v=d+f+g*r,y=p-a+2*Math.random()*a,m=v-a+2*Math.random()*a,b=this.helper.ellipse(y,m,o,o,e);n.push.apply(n,b.ops)}return{type:"fillSketch",ops:n}},t}(),At=function(){function t(t){this.helper=t}return t.prototype.fillPolygons=function(t,e){var n=Pt(t,e);return{type:"fillSketch",ops:this.dashedLine(n,e)}},t.prototype.dashedLine=function(t,e){var n=this,r=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,o=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,a=[];return t.forEach((function(t){var i=xt(t),s=Math.floor(i/(r+o)),u=(i+o-s*(r+o))/2,c=t[0],l=t[1];c[0]>l[0]&&(c=t[1],l=t[0]);for(var h=Math.atan((l[1]-c[1])/(l[0]-c[0])),f=0;f<s;f++){var p=f*(r+o),d=p+r,g=[c[0]+p*Math.cos(h)+u*Math.cos(h),c[1]+p*Math.sin(h)+u*Math.sin(h)],v=[c[0]+d*Math.cos(h)+u*Math.cos(h),c[1]+d*Math.sin(h)+u*Math.sin(h)];a.push.apply(a,n.helper.doubleLineOps(g[0],g[1],v[0],v[1],e))}})),a},t}(),Et=function(){function t(t){this.helper=t}return t.prototype.fillPolygons=function(t,e){var n=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,r=e.zigzagOffset<0?n:e.zigzagOffset,o=Pt(t,e=Object.assign({},e,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(o,r,e)}},t.prototype.zigzagLines=function(t,e,n){var r=this,o=[];return t.forEach((function(t){var a=xt(t),i=Math.round(a/(2*e)),s=t[0],u=t[1];s[0]>u[0]&&(s=t[1],u=t[0]);for(var c=Math.atan((u[1]-s[1])/(u[0]-s[0])),l=0;l<i;l++){var h=2*l*e,f=2*(l+1)*e,p=Math.sqrt(2*Math.pow(e,2)),d=[s[0]+h*Math.cos(c),s[1]+h*Math.sin(c)],g=[s[0]+f*Math.cos(c),s[1]+f*Math.sin(c)],v=[d[0]+p*Math.cos(c+Math.PI/4),d[1]+p*Math.sin(c+Math.PI/4)];o.push.apply(o,Mt(Mt([],r.helper.doubleLineOps(d[0],d[1],v[0],v[1],n),!1),r.helper.doubleLineOps(v[0],v[1],g[0],g[1],n),!1))}})),o},t}(),Lt={},_t=function(){function t(t){this.seed=t}return t.prototype.next=function(){return this.seed?(Math.pow(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Math.pow(2,31):Math.random()},t}();const Tt={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ct(t,e){return t.type===e}function zt(t){const e=[],n=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t);let r="BOD",o=0,a=n[o];for(;!Ct(a,2);){let i=0;const s=[];if("BOD"===r){if("M"!==a.text&&"m"!==a.text)return zt("M0,0"+t);o++,i=Tt[a.text],r=a.text}else Ct(a,1)?i=Tt[r]:(o++,i=Tt[a.text],r=a.text);if(!(o+i<n.length))throw new Error("Path data ended short");for(let t=o;t<o+i;t++){const e=n[t];if(!Ct(e,1))throw new Error("Param not a number: "+r+","+e.text);s[s.length]=+e.text}if("number"!=typeof Tt[r])throw new Error("Bad segment: "+r);{const t={key:r,data:s};e.push(t),o+=i,a=n[o],"M"===r&&(r="L"),"m"===r&&(r="l")}}return e}function Ft(t){let e=0,n=0,r=0,o=0;const a=[];for(const{key:i,data:s}of t)switch(i){case"M":a.push({key:"M",data:[...s]}),[e,n]=s,[r,o]=s;break;case"m":e+=s[0],n+=s[1],a.push({key:"M",data:[e,n]}),r=e,o=n;break;case"L":a.push({key:"L",data:[...s]}),[e,n]=s;break;case"l":e+=s[0],n+=s[1],a.push({key:"L",data:[e,n]});break;case"C":a.push({key:"C",data:[...s]}),e=s[4],n=s[5];break;case"c":{const t=s.map(((t,r)=>r%2?t+n:t+e));a.push({key:"C",data:t}),e=t[4],n=t[5];break}case"Q":a.push({key:"Q",data:[...s]}),e=s[2],n=s[3];break;case"q":{const t=s.map(((t,r)=>r%2?t+n:t+e));a.push({key:"Q",data:t}),e=t[2],n=t[3];break}case"A":a.push({key:"A",data:[...s]}),e=s[5],n=s[6];break;case"a":e+=s[5],n+=s[6],a.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,n]});break;case"H":a.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],a.push({key:"H",data:[e]});break;case"V":a.push({key:"V",data:[...s]}),n=s[0];break;case"v":n+=s[0],a.push({key:"V",data:[n]});break;case"S":a.push({key:"S",data:[...s]}),e=s[2],n=s[3];break;case"s":{const t=s.map(((t,r)=>r%2?t+n:t+e));a.push({key:"S",data:t}),e=t[2],n=t[3];break}case"T":a.push({key:"T",data:[...s]}),e=s[0],n=s[1];break;case"t":e+=s[0],n+=s[1],a.push({key:"T",data:[e,n]});break;case"Z":case"z":a.push({key:"Z",data:[]}),e=r,n=o}return a}function jt(t){const e=[];let n="",r=0,o=0,a=0,i=0,s=0,u=0;for(const{key:c,data:l}of t){switch(c){case"M":e.push({key:"M",data:[...l]}),[r,o]=l,[a,i]=l;break;case"C":e.push({key:"C",data:[...l]}),r=l[4],o=l[5],s=l[2],u=l[3];break;case"L":e.push({key:"L",data:[...l]}),[r,o]=l;break;case"H":r=l[0],e.push({key:"L",data:[r,o]});break;case"V":o=l[0],e.push({key:"L",data:[r,o]});break;case"S":{let t=0,a=0;"C"===n||"S"===n?(t=r+(r-s),a=o+(o-u)):(t=r,a=o),e.push({key:"C",data:[t,a,...l]}),s=l[0],u=l[1],r=l[2],o=l[3];break}case"T":{const[t,a]=l;let i=0,c=0;"Q"===n||"T"===n?(i=r+(r-s),c=o+(o-u)):(i=r,c=o);const h=r+2*(i-r)/3,f=o+2*(c-o)/3,p=t+2*(i-t)/3,d=a+2*(c-a)/3;e.push({key:"C",data:[h,f,p,d,t,a]}),s=i,u=c,r=t,o=a;break}case"Q":{const[t,n,a,i]=l,c=r+2*(t-r)/3,h=o+2*(n-o)/3,f=a+2*(t-a)/3,p=i+2*(n-i)/3;e.push({key:"C",data:[c,h,f,p,a,i]}),s=t,u=n,r=a,o=i;break}case"A":{const t=Math.abs(l[0]),n=Math.abs(l[1]),a=l[2],i=l[3],s=l[4],u=l[5],c=l[6];0===t||0===n?(e.push({key:"C",data:[r,o,u,c,u,c]}),r=u,o=c):r===u&&o===c||(Wt(r,o,u,c,t,n,a,i,s).forEach((function(t){e.push({key:"C",data:t})})),r=u,o=c);break}case"Z":e.push({key:"Z",data:[]}),r=a,o=i}n=c}return e}function It(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function Wt(t,e,n,r,o,a,i,s,u,c){const l=(h=i,Math.PI*h/180);var h;let f=[],p=0,d=0,g=0,v=0;if(c)[p,d,g,v]=c;else{[t,e]=It(t,e,-l),[n,r]=It(n,r,-l);const i=(t-n)/2,c=(e-r)/2;let h=i*i/(o*o)+c*c/(a*a);h>1&&(h=Math.sqrt(h),o*=h,a*=h);const f=o*o,y=a*a,m=f*y-f*c*c-y*i*i,b=f*c*c+y*i*i,k=(s===u?-1:1)*Math.sqrt(Math.abs(m/b));g=k*o*c/a+(t+n)/2,v=k*-a*i/o+(e+r)/2,p=Math.asin(parseFloat(((e-v)/a).toFixed(9))),d=Math.asin(parseFloat(((r-v)/a).toFixed(9))),t<g&&(p=Math.PI-p),n<g&&(d=Math.PI-d),p<0&&(p=2*Math.PI+p),d<0&&(d=2*Math.PI+d),u&&p>d&&(p-=2*Math.PI),!u&&d>p&&(d-=2*Math.PI)}let y=d-p;if(Math.abs(y)>120*Math.PI/180){const t=d,e=n,s=r;d=u&&d>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,f=Wt(n=g+o*Math.cos(d),r=v+a*Math.sin(d),e,s,o,a,i,0,u,[d,t,g,v])}y=d-p;const m=Math.cos(p),b=Math.sin(p),k=Math.cos(d),M=Math.sin(d),w=Math.tan(y/4),x=4/3*o*w,P=4/3*a*w,S=[t,e],O=[t+x*b,e-P*m],D=[n+x*M,r-P*k],$=[n,r];if(O[0]=2*S[0]-O[0],O[1]=2*S[1]-O[1],c)return[O,D,$].concat(f);{f=[O,D,$].concat(f);const t=[];for(let e=0;e<f.length;e+=3){const n=It(f[e][0],f[e][1],l),r=It(f[e+1][0],f[e+1][1],l),o=It(f[e+2][0],f[e+2][1],l);t.push([n[0],n[1],r[0],r[1],o[0],o[1]])}return t}}var Rt={randOffset:function(t,e){return Ut(t,e)},randOffsetWithRange:function(t,e,n){return Jt(t,e,n)},ellipse:function(t,e,n,r,o){return Bt(t,e,o,Vt(n,r,o)).opset},doubleLineOps:function(t,e,n,r,o){return Xt(t,e,n,r,o,!0)}};function Gt(t,e,n,r,o){return{type:"path",ops:Xt(t,e,n,r,o)}}function Nt(t,e,n){var r=(t||[]).length;if(r>2){for(var o=[],a=0;a<r-1;a++)o.push.apply(o,Xt(t[a][0],t[a][1],t[a+1][0],t[a+1][1],n));return e&&o.push.apply(o,Xt(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:o}}return 2===r?Gt(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function qt(t,e){var n=te(t,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){var r=te(t,1.5*(1+.22*e.roughness),function(t){var e=kt({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}(e));n=n.concat(r)}return{type:"path",ops:n}}function Vt(t,e,n){var r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),o=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),a=2*Math.PI/o,i=Math.abs(t/2),s=Math.abs(e/2),u=1-n.curveFitting;return{increment:a,rx:i+=Ut(i*u,n),ry:s+=Ut(s*u,n)}}function Bt(t,e,n,r){var o=ne(r.increment,t,e,r.rx,r.ry,1,r.increment*Jt(.1,Jt(.4,1,n),n),n),a=o[0],i=o[1],s=ee(a,null,n);if(!n.disableMultiStroke&&0!==n.roughness){var u=ee(ne(r.increment,t,e,r.rx,r.ry,1.5,0,n)[0],null,n);s=s.concat(u)}return{estimatedPoints:i,opset:{type:"path",ops:s}}}function Zt(t,e,n,r,o,a,i,s,u){var c=t,l=e,h=Math.abs(n/2),f=Math.abs(r/2);h+=Ut(.01*h,u),f+=Ut(.01*f,u);for(var p=o,d=a;p<0;)p+=2*Math.PI,d+=2*Math.PI;d-p>2*Math.PI&&(p=0,d=2*Math.PI);var g=2*Math.PI/u.curveStepCount,v=Math.min(g/2,(d-p)/2),y=re(v,c,l,h,f,p,d,1,u);if(!u.disableMultiStroke){var m=re(v,c,l,h,f,p,d,1.5,u);y.push.apply(y,m)}return i&&(s?y.push.apply(y,Mt(Mt([],Xt(c,l,c+h*Math.cos(p),l+f*Math.sin(p),u),!1),Xt(c,l,c+h*Math.cos(d),l+f*Math.sin(d),u),!1)):y.push({op:"lineTo",data:[c,l]},{op:"lineTo",data:[c+h*Math.cos(p),l+f*Math.sin(p)]})),{type:"path",ops:y}}function Ht(t,e){for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];if(a.length){var i=e.maxRandomnessOffset||0,s=a.length;if(s>2){n.push({op:"move",data:[a[0][0]+Ut(i,e),a[0][1]+Ut(i,e)]});for(var u=1;u<s;u++)n.push({op:"lineTo",data:[a[u][0]+Ut(i,e),a[u][1]+Ut(i,e)]})}}}return{type:"fillPath",ops:n}}function Qt(t,e){return function(t,e){var n=t.fillStyle||"hachure";if(!Lt[n])switch(n){case"zigzag":Lt[n]||(Lt[n]=new Ot(e));break;case"cross-hatch":Lt[n]||(Lt[n]=new Dt(e));break;case"dots":Lt[n]||(Lt[n]=new $t(e));break;case"dashed":Lt[n]||(Lt[n]=new At(e));break;case"zigzag-line":Lt[n]||(Lt[n]=new Et(e));break;default:Lt[n="hachure"]||(Lt[n]=new St(e))}return Lt[n]}(e,Rt).fillPolygons(t,e)}function Kt(t){return t.randomizer||(t.randomizer=new _t(t.seed||0)),t.randomizer.next()}function Jt(t,e,n,r){return void 0===r&&(r=1),n.roughness*r*(Kt(n)*(e-t)+t)}function Ut(t,e,n){return void 0===n&&(n=1),Jt(-t,t,e,n)}function Xt(t,e,n,r,o,a){void 0===a&&(a=!1);var i=a?o.disableMultiStrokeFill:o.disableMultiStroke,s=Yt(t,e,n,r,o,!0,!1);if(i)return s;var u=Yt(t,e,n,r,o,!0,!0);return s.concat(u)}function Yt(t,e,n,r,o,a,i){var s,u=Math.pow(t-n,2)+Math.pow(e-r,2),c=Math.sqrt(u);s=c<200?1:c>500?.4:-.0016668*c+1.233334;var l=o.maxRandomnessOffset||0;l*l*100>u&&(l=c/10);var h=l/2,f=.2+.2*Kt(o),p=o.bowing*o.maxRandomnessOffset*(r-e)/200,d=o.bowing*o.maxRandomnessOffset*(t-n)/200;p=Ut(p,o,s),d=Ut(d,o,s);var g=[],v=function(){return Ut(h,o,s)},y=function(){return Ut(l,o,s)},m=o.preserveVertices;return a&&(i?g.push({op:"move",data:[t+(m?0:v()),e+(m?0:v())]}):g.push({op:"move",data:[t+(m?0:Ut(l,o,s)),e+(m?0:Ut(l,o,s))]})),i?g.push({op:"bcurveTo",data:[p+t+(n-t)*f+v(),d+e+(r-e)*f+v(),p+t+2*(n-t)*f+v(),d+e+2*(r-e)*f+v(),n+(m?0:v()),r+(m?0:v())]}):g.push({op:"bcurveTo",data:[p+t+(n-t)*f+y(),d+e+(r-e)*f+y(),p+t+2*(n-t)*f+y(),d+e+2*(r-e)*f+y(),n+(m?0:y()),r+(m?0:y())]}),g}function te(t,e,n){var r=[];r.push([t[0][0]+Ut(e,n),t[0][1]+Ut(e,n)]),r.push([t[0][0]+Ut(e,n),t[0][1]+Ut(e,n)]);for(var o=1;o<t.length;o++)r.push([t[o][0]+Ut(e,n),t[o][1]+Ut(e,n)]),o===t.length-1&&r.push([t[o][0]+Ut(e,n),t[o][1]+Ut(e,n)]);return ee(r,null,n)}function ee(t,e,n){var r=t.length,o=[];if(r>3){var a=[],i=1-n.curveTightness;o.push({op:"move",data:[t[1][0],t[1][1]]});for(var s=1;s+2<r;s++){var u=t[s];a[0]=[u[0],u[1]],a[1]=[u[0]+(i*t[s+1][0]-i*t[s-1][0])/6,u[1]+(i*t[s+1][1]-i*t[s-1][1])/6],a[2]=[t[s+1][0]+(i*t[s][0]-i*t[s+2][0])/6,t[s+1][1]+(i*t[s][1]-i*t[s+2][1])/6],a[3]=[t[s+1][0],t[s+1][1]],o.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(e&&2===e.length){var c=n.maxRandomnessOffset;o.push({op:"lineTo",data:[e[0]+Ut(c,n),e[1]+Ut(c,n)]})}}else 3===r?(o.push({op:"move",data:[t[1][0],t[1][1]]}),o.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===r&&o.push.apply(o,Xt(t[0][0],t[0][1],t[1][0],t[1][1],n));return o}function ne(t,e,n,r,o,a,i,s){var u=[],c=[];if(0===s.roughness){t/=4,c.push([e+r*Math.cos(-t),n+o*Math.sin(-t)]);for(var l=0;l<=2*Math.PI;l+=t){var h=[e+r*Math.cos(l),n+o*Math.sin(l)];u.push(h),c.push(h)}c.push([e+r*Math.cos(0),n+o*Math.sin(0)]),c.push([e+r*Math.cos(t),n+o*Math.sin(t)])}else{var f=Ut(.5,s)-Math.PI/2;c.push([Ut(a,s)+e+.9*r*Math.cos(f-t),Ut(a,s)+n+.9*o*Math.sin(f-t)]);var p=2*Math.PI+f-.01;for(l=f;l<p;l+=t)h=[Ut(a,s)+e+r*Math.cos(l),Ut(a,s)+n+o*Math.sin(l)],u.push(h),c.push(h);c.push([Ut(a,s)+e+r*Math.cos(f+2*Math.PI+.5*i),Ut(a,s)+n+o*Math.sin(f+2*Math.PI+.5*i)]),c.push([Ut(a,s)+e+.98*r*Math.cos(f+i),Ut(a,s)+n+.98*o*Math.sin(f+i)]),c.push([Ut(a,s)+e+.9*r*Math.cos(f+.5*i),Ut(a,s)+n+.9*o*Math.sin(f+.5*i)])}return[c,u]}function re(t,e,n,r,o,a,i,s,u){var c=a+Ut(.1,u),l=[];l.push([Ut(s,u)+e+.9*r*Math.cos(c-t),Ut(s,u)+n+.9*o*Math.sin(c-t)]);for(var h=c;h<=i;h+=t)l.push([Ut(s,u)+e+r*Math.cos(h),Ut(s,u)+n+o*Math.sin(h)]);return l.push([e+r*Math.cos(i),n+o*Math.sin(i)]),l.push([e+r*Math.cos(i),n+o*Math.sin(i)]),ee(l,null,u)}function oe(t){return[...t]}function ae(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function ie(t,e,n){const r=ae(e,n);if(0===r)return ae(t,e);let o=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return o=Math.max(0,Math.min(1,o)),ae(t,se(e,n,o))}function se(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function ue(t,e,n,r){const o=r||[];if(function(t,e){const n=t[e+0],r=t[e+1],o=t[e+2],a=t[e+3];let i=3*r[0]-2*n[0]-a[0];i*=i;let s=3*r[1]-2*n[1]-a[1];s*=s;let u=3*o[0]-2*a[0]-n[0];u*=u;let c=3*o[1]-2*a[1]-n[1];return c*=c,i<u&&(i=u),s<c&&(s=c),i+s}(t,e)<n){const n=t[e+0];o.length?(a=o[o.length-1],i=n,Math.sqrt(ae(a,i))>1&&o.push(n)):o.push(n),o.push(t[e+3])}else{const r=.5,a=t[e+0],i=t[e+1],s=t[e+2],u=t[e+3],c=se(a,i,r),l=se(i,s,r),h=se(s,u,r),f=se(c,l,r),p=se(l,h,r),d=se(f,p,r);ue([a,c,f,d],0,n,o),ue([d,p,h,u],0,n,o)}var a,i;return o}function ce(t,e){return le(t,0,t.length,e)}function le(t,e,n,r,o){const a=o||[],i=t[e],s=t[n-1];let u=0,c=1;for(let r=e+1;r<n-1;++r){const e=ie(t[r],i,s);e>u&&(u=e,c=r)}return Math.sqrt(u)>r?(le(t,e,c+1,r,a),le(t,c,n,r,a)):(a.length||a.push(i),a.push(s)),a}function he(t,e=.15,n){const r=[],o=(t.length-1)/3;for(let n=0;n<o;n++)ue(t,3*n,e,r);return n&&n>0?le(r,0,r.length,n):r}var fe="none",pe=function(){function t(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}return t.newSeed=function(){return Math.floor(Math.random()*Math.pow(2,31))},t.prototype._o=function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions},t.prototype._d=function(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}},t.prototype.line=function(t,e,n,r,o){var a=this._o(o);return this._d("line",[Gt(t,e,n,r,a)],a)},t.prototype.rectangle=function(t,e,n,r,o){var a=this._o(o),i=[],s=function(t,e,n,r,o){return function(t,e){return Nt(t,!0,e)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],o)}(t,e,n,r,a);if(a.fill){var u=[[t,e],[t+n,e],[t+n,e+r],[t,e+r]];"solid"===a.fillStyle?i.push(Ht([u],a)):i.push(Qt([u],a))}return a.stroke!==fe&&i.push(s),this._d("rectangle",i,a)},t.prototype.ellipse=function(t,e,n,r,o){var a=this._o(o),i=[],s=Vt(n,r,a),u=Bt(t,e,a,s);if(a.fill)if("solid"===a.fillStyle){var c=Bt(t,e,a,s).opset;c.type="fillPath",i.push(c)}else i.push(Qt([u.estimatedPoints],a));return a.stroke!==fe&&i.push(u.opset),this._d("ellipse",i,a)},t.prototype.circle=function(t,e,n,r){var o=this.ellipse(t,e,n,n,r);return o.shape="circle",o},t.prototype.linearPath=function(t,e){var n=this._o(e);return this._d("linearPath",[Nt(t,!1,n)],n)},t.prototype.arc=function(t,e,n,r,o,a,i,s){void 0===i&&(i=!1);var u=this._o(s),c=[],l=Zt(t,e,n,r,o,a,i,!0,u);if(i&&u.fill)if("solid"===u.fillStyle){var h=kt({},u);h.disableMultiStroke=!0;var f=Zt(t,e,n,r,o,a,!0,!1,h);f.type="fillPath",c.push(f)}else c.push(function(t,e,n,r,o,a,i){var s=t,u=e,c=Math.abs(n/2),l=Math.abs(r/2);c+=Ut(.01*c,i),l+=Ut(.01*l,i);for(var h=o,f=a;h<0;)h+=2*Math.PI,f+=2*Math.PI;f-h>2*Math.PI&&(h=0,f=2*Math.PI);for(var p=(f-h)/i.curveStepCount,d=[],g=h;g<=f;g+=p)d.push([s+c*Math.cos(g),u+l*Math.sin(g)]);return d.push([s+c*Math.cos(f),u+l*Math.sin(f)]),d.push([s,u]),Qt([d],i)}(t,e,n,r,o,a,u));return u.stroke!==fe&&c.push(l),this._d("arc",c,u)},t.prototype.curve=function(t,e){var n=this._o(e),r=[],o=qt(t,n);if(n.fill&&n.fill!==fe&&t.length>=3){var a=he(function(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(oe(t[0]),oe(t[1]),oe(t[2]),oe(t[2]));else{const n=[];n.push(t[0],t[0]);for(let e=1;e<t.length;e++)n.push(t[e]),e===t.length-1&&n.push(t[e]);const o=[],a=1-e;r.push(oe(n[0]));for(let t=1;t+2<n.length;t++){const e=n[t];o[0]=[e[0],e[1]],o[1]=[e[0]+(a*n[t+1][0]-a*n[t-1][0])/6,e[1]+(a*n[t+1][1]-a*n[t-1][1])/6],o[2]=[n[t+1][0]+(a*n[t][0]-a*n[t+2][0])/6,n[t+1][1]+(a*n[t][1]-a*n[t+2][1])/6],o[3]=[n[t+1][0],n[t+1][1]],r.push(o[1],o[2],o[3])}}return r}(t),10,(1+n.roughness)/2);"solid"===n.fillStyle?r.push(Ht([a],n)):r.push(Qt([a],n))}return n.stroke!==fe&&r.push(o),this._d("curve",r,n)},t.prototype.polygon=function(t,e){var n=this._o(e),r=[],o=Nt(t,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(Ht([t],n)):r.push(Qt([t],n))),n.stroke!==fe&&r.push(o),this._d("polygon",r,n)},t.prototype.path=function(t,e){var n=this._o(e),r=[];if(!t)return this._d("path",r,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var o=n.fill&&"transparent"!==n.fill&&n.fill!==fe,a=n.stroke!==fe,i=!!(n.simplification&&n.simplification<1),s=function(t,e,n){const r=jt(Ft(zt(t))),o=[];let a=[],i=[0,0],s=[];const u=()=>{s.length>=4&&a.push(...he(s,1)),s=[]},c=()=>{u(),a.length&&(o.push(a),a=[])};for(const{key:t,data:e}of r)switch(t){case"M":c(),i=[e[0],e[1]],a.push(i);break;case"L":u(),a.push([e[0],e[1]]);break;case"C":if(!s.length){const t=a.length?a[a.length-1]:i;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":u(),a.push([i[0],i[1]])}if(c(),!n)return o;const l=[];for(const t of o){const e=ce(t,n);e.length&&l.push(e)}return l}(t,0,i?4-4*n.simplification:(1+n.roughness)/2);return o&&("solid"===n.fillStyle?r.push(Ht(s,n)):r.push(Qt(s,n))),a&&(i?s.forEach((function(t){r.push(Nt(t,!1,n))})):r.push(function(t,e){for(var n=jt(Ft(zt(t))),r=[],o=[0,0],a=[0,0],i=function(t,n){switch(t){case"M":var i=1*(e.maxRandomnessOffset||0),s=e.preserveVertices;r.push({op:"move",data:n.map((function(t){return t+(s?0:Ut(i,e))}))}),a=[n[0],n[1]],o=[n[0],n[1]];break;case"L":r.push.apply(r,Xt(a[0],a[1],n[0],n[1],e)),a=[n[0],n[1]];break;case"C":var u=n[0],c=n[1],l=n[2],h=n[3],f=n[4],p=n[5];r.push.apply(r,function(t,e,n,r,o,a,i,s){for(var u=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],l=[0,0],h=s.disableMultiStroke?1:2,f=s.preserveVertices,p=0;p<h;p++)0===p?u.push({op:"move",data:[i[0],i[1]]}):u.push({op:"move",data:[i[0]+(f?0:Ut(c[0],s)),i[1]+(f?0:Ut(c[0],s))]}),l=f?[o,a]:[o+Ut(c[p],s),a+Ut(c[p],s)],u.push({op:"bcurveTo",data:[t+Ut(c[p],s),e+Ut(c[p],s),n+Ut(c[p],s),r+Ut(c[p],s),l[0],l[1]]});return u}(u,c,l,h,f,p,a,e)),a=[f,p];break;case"Z":r.push.apply(r,Xt(a[0],a[1],o[0],o[1],e)),a=[o[0],o[1]]}},s=0,u=n;s<u.length;s++){var c=u[s];i(c.key,c.data)}return{type:"path",ops:r}}(t,n))),this._d("path",r,n)},t.prototype.opsToPath=function(t,e){for(var n="",r=0,o=t.ops;r<o.length;r++){var a=o[r],i="number"==typeof e&&e>=0?a.data.map((function(t){return+t.toFixed(e)})):a.data;switch(a.op){case"move":n+="M".concat(i[0]," ").concat(i[1]," ");break;case"bcurveTo":n+="C".concat(i[0]," ").concat(i[1],", ").concat(i[2]," ").concat(i[3],", ").concat(i[4]," ").concat(i[5]," ");break;case"lineTo":n+="L".concat(i[0]," ").concat(i[1]," ")}}return n.trim()},t.prototype.toPaths=function(t){for(var e=t.sets||[],n=t.options||this.defaultOptions,r=[],o=0,a=e;o<a.length;o++){var i=a[o],s=null;switch(i.type){case"path":s={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:fe};break;case"fillPath":s={d:this.opsToPath(i),stroke:fe,strokeWidth:0,fill:n.fill||fe};break;case"fillSketch":s=this.fillSketch(i,n)}s&&r.push(s)}return r},t.prototype.fillSketch=function(t,e){var n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||fe,strokeWidth:n,fill:fe}},t}(),de=function(){function t(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new pe(e)}return t.prototype.draw=function(t){for(var e=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.ctx,o=t.options.fixedDecimalPlaceDigits,a=0,i=e;a<i.length;a++){var s=i[a];switch(s.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,s,o),r.restore();break;case"fillPath":r.save(),r.fillStyle=n.fill||"";var u="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(r,s,o,u),r.restore();break;case"fillSketch":this.fillSketch(r,s,n)}}},t.prototype.fillSketch=function(t,e,n){var r=n.fillWeight;r<0&&(r=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=r,this._drawToContext(t,e,n.fixedDecimalPlaceDigits),t.restore()},t.prototype._drawToContext=function(t,e,n,r){void 0===r&&(r="nonzero"),t.beginPath();for(var o=0,a=e.ops;o<a.length;o++){var i=a[o],s="number"==typeof n&&n>=0?i.data.map((function(t){return+t.toFixed(n)})):i.data;switch(i.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1])}}"fillPath"===e.type?t.fill(r):t.stroke()},Object.defineProperty(t.prototype,"generator",{get:function(){return this.gen},enumerable:!1,configurable:!0}),t.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},t.prototype.line=function(t,e,n,r,o){var a=this.gen.line(t,e,n,r,o);return this.draw(a),a},t.prototype.rectangle=function(t,e,n,r,o){var a=this.gen.rectangle(t,e,n,r,o);return this.draw(a),a},t.prototype.ellipse=function(t,e,n,r,o){var a=this.gen.ellipse(t,e,n,r,o);return this.draw(a),a},t.prototype.circle=function(t,e,n,r){var o=this.gen.circle(t,e,n,r);return this.draw(o),o},t.prototype.linearPath=function(t,e){var n=this.gen.linearPath(t,e);return this.draw(n),n},t.prototype.polygon=function(t,e){var n=this.gen.polygon(t,e);return this.draw(n),n},t.prototype.arc=function(t,e,n,r,o,a,i,s){void 0===i&&(i=!1);var u=this.gen.arc(t,e,n,r,o,a,i,s);return this.draw(u),u},t.prototype.curve=function(t,e){var n=this.gen.curve(t,e);return this.draw(n),n},t.prototype.path=function(t,e){var n=this.gen.path(t,e);return this.draw(n),n},t}(),ge="http://www.w3.org/2000/svg",ve=function(){function t(t,e){this.svg=t,this.gen=new pe(e)}return t.prototype.draw=function(t){for(var e=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,o=r.createElementNS(ge,"g"),a=t.options.fixedDecimalPlaceDigits,i=0,s=e;i<s.length;i++){var u=s[i],c=null;switch(u.type){case"path":(c=r.createElementNS(ge,"path")).setAttribute("d",this.opsToPath(u,a)),c.setAttribute("stroke",n.stroke),c.setAttribute("stroke-width",n.strokeWidth+""),c.setAttribute("fill","none"),n.strokeLineDash&&c.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset","".concat(n.strokeLineDashOffset));break;case"fillPath":(c=r.createElementNS(ge,"path")).setAttribute("d",this.opsToPath(u,a)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",n.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||c.setAttribute("fill-rule","evenodd");break;case"fillSketch":c=this.fillSketch(r,u,n)}c&&o.appendChild(c)}return o},t.prototype.fillSketch=function(t,e,n){var r=n.fillWeight;r<0&&(r=n.strokeWidth/2);var o=t.createElementNS(ge,"path");return o.setAttribute("d",this.opsToPath(e,n.fixedDecimalPlaceDigits)),o.setAttribute("stroke",n.fill||""),o.setAttribute("stroke-width",r+""),o.setAttribute("fill","none"),n.fillLineDash&&o.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&o.setAttribute("stroke-dashoffset","".concat(n.fillLineDashOffset)),o},Object.defineProperty(t.prototype,"generator",{get:function(){return this.gen},enumerable:!1,configurable:!0}),t.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},t.prototype.opsToPath=function(t,e){return this.gen.opsToPath(t,e)},t.prototype.line=function(t,e,n,r,o){var a=this.gen.line(t,e,n,r,o);return this.draw(a)},t.prototype.rectangle=function(t,e,n,r,o){var a=this.gen.rectangle(t,e,n,r,o);return this.draw(a)},t.prototype.ellipse=function(t,e,n,r,o){var a=this.gen.ellipse(t,e,n,r,o);return this.draw(a)},t.prototype.circle=function(t,e,n,r){var o=this.gen.circle(t,e,n,r);return this.draw(o)},t.prototype.linearPath=function(t,e){var n=this.gen.linearPath(t,e);return this.draw(n)},t.prototype.polygon=function(t,e){var n=this.gen.polygon(t,e);return this.draw(n)},t.prototype.arc=function(t,e,n,r,o,a,i,s){void 0===i&&(i=!1);var u=this.gen.arc(t,e,n,r,o,a,i,s);return this.draw(u)},t.prototype.curve=function(t,e){var n=this.gen.curve(t,e);return this.draw(n)},t.prototype.path=function(t,e){var n=this.gen.path(t,e);return this.draw(n)},t}(),ye={canvas:function(t,e){return new de(t,e)},svg:function(t,e){return new ve(t,e)},generator:function(t){return new pe(t)},newSeed:function(){return pe.newSeed()}},me=ye;function be(t){let n,r,o,a,i,s;n=new yt({props:{multiple:!1,accept:"image/svg+xml"}}),n.$on("drop",t[2]);let p=[t[1]],d={};for(let t=0;t<p.length;t+=1)d=e(d,p[t]);return{c(){var t,e;(t=n.$$.fragment)&&t.c(),r=f(),o=h("main"),a=h("div"),e="svg",i=document.createElementNS("http://www.w3.org/2000/svg",e),g(i,d),y(i,"svelte-1jmgdsg",!0),v(a,"margin-top","20px"),v(o,"text-align","center")},m(e,l){j(n,e,l),c(e,r,l),c(e,o,l),u(o,a),u(a,i),t[3](i),s=!0},p(t,[e]){g(i,d=function(t,e){const n={},r={},o={$$scope:1};let a=t.length;for(;a--;){const i=t[a],s=e[a];if(s){for(const t in i)t in s||(r[t]=1);for(const t in s)o[t]||(n[t]=s[t],o[t]=1);t[a]=s}else for(const t in i)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(p,[2&e&&t[1]])),y(i,"svelte-1jmgdsg",!0)},i(t){s||(z(n.$$.fragment,t),s=!0)},o(t){F(n.$$.fragment,t),s=!1},d(e){I(n,e),e&&l(r),e&&l(o),t[3](null)}}}function ke(t,e,n){let r,o={width:0,height:0};return M((()=>{})),[r,o,function(t){const{acceptedFiles:e}=t.detail,a=new FileReader;a.onload=()=>{!function(t){const e=new DOMParser;n(0,r.innerHTML="",r);const a=e.parseFromString(t,"image/svg+xml").documentElement,i=r;n(1,o={width:+a.attributes.width.nodeValue,height:+a.attributes.height.nodeValue,xmlns:a.attributes.xmlns.nodeValue});const s=me.svg(r);function u(t,e){if(!e)return;const n=c(e);if("text"!==e.nodeName)if("rect"!==e.nodeName)if("path"!==e.nodeName)if("line"!==e.nodeName){if("g"===e.nodeName){const n=e.cloneNode(!1);l(t,e,n),t=n}else console.log(e.nodeName);if(e.children.length)for(const n of e.children)u(t,n)}else{e.getAttribute("d");const[r,o,a,i]=h(e,"x1","y1","x2","y2");l(t,e,s.line(r,o,a,i,n))}else{const r=e.getAttribute("d");l(t,e,s.path(r,n))}else{const[r,o,a,i]=h(e,"x","y","width","height");l(t,e,s.rectangle(r,o,a,i,n))}else{const n=e.cloneNode(!0);l(t,e,n)}}function c(t){let{fill:e,stroke:n,strokeWidth:r,opacity:o}=t.style||{};const a=e&&"none"!==e,i=n&&"none"!==n;return""===o&&(o=1),a&&console.log({opacity:o}),{fill:e&&"none"!==e?e:"none",stroke:i?n:"none",...a?{fillWeight:o<.5?.5:o<.8?1.4:2,hachureAngle:[-41,49][Math.round(Math.random())],fillStyle:o<.4?"hachure":"zigzag"}:{},...i?{strokeWidth:+r.replace("px","")||1}:{}}}function l(t,e,n){n.setAttribute("transform",e.getAttribute("transform")||""),t.appendChild(n)}function h(t,...e){return e.map((e=>+t.getAttribute(e)))}u(i,a)}(a.result)},a.readAsText(e[0])},function(t){P[t?"unshift":"push"]((()=>{r=t,n(0,r)}))}]}return new class extends G{constructor(t){super(),R(this,t,ke,be,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
